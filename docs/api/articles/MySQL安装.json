{"title":"MySQL安装","slug":"MySQL安装","date":"2022-09-28T03:05:54.266Z","updated":"2023-04-20T06:17:37.436Z","comments":true,"path":"api/articles/MySQL安装.json","excerpt":null,"covers":"https://img0.baidu.com/it/u=730256309,1700139135&fm=253&fmt=auto&app=138&f=JPEG?w=899&h=500","content":"<h2 id=\"Linux安装MySQL\"><a href=\"#Linux安装MySQL\" class=\"headerlink\" title=\"Linux安装MySQL\"></a>Linux安装MySQL</h2><h3 id=\"压缩包安装\"><a href=\"#压缩包安装\" class=\"headerlink\" title=\"压缩包安装\"></a>压缩包安装</h3><h4 id=\"1-下载\"><a href=\"#1-下载\" class=\"headerlink\" title=\"1. 下载\"></a>1. 下载</h4><p><del><a href=\"https://downloads.mysql.com/archives/community/\">MySQL下载地址</a></del>,<a href=\"https://dev.mysql.com/downloads/\">MySQL下载地址</a>下载后将安装包上传usr&#x2F;local</p>\n<h4 id=\"2-解压\"><a href=\"#2-解压\" class=\"headerlink\" title=\"2. 解压\"></a>2. 解压</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">tar</span> <span class=\"token parameter variable\">-zxvf</span> mysql-5.6.33-linux-glibc2.5-x86_64.tar.gz<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<blockquote>\n<p>解压后位置usr&#x2F;local&#x2F;mysql</p>\n</blockquote>\n<h4 id=\"3-创建用户及用户组\"><a href=\"#3-创建用户及用户组\" class=\"headerlink\" title=\"3. 创建用户及用户组\"></a>3. 创建用户及用户组</h4><p>先检查是否有mysql用户组和mysql用户,没有就添加</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># 查看所有用户</span>\n<span class=\"token function\">cat</span> /etc/passwd\n<span class=\"token comment\"># 查看用户组</span>\n<span class=\"token function\">groups</span> mysql\n<span class=\"token comment\"># 添加用户组</span>\n<span class=\"token function\">groupadd</span> mysql\n<span class=\"token comment\"># 删除用户组 groupdel</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>添加用户mysql然后将mysql用户添加到到用户组mysql</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># -r建立系统帐号 -g&lt;群组>指定用户所属的群组。</span>\n<span class=\"token function\">useradd</span> <span class=\"token parameter variable\">-r</span> <span class=\"token parameter variable\">-g</span> mysql mysql\n<span class=\"token comment\"># userdel删除</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"4-操作\"><a href=\"#4-操作\" class=\"headerlink\" title=\"4. 操作\"></a>4. 操作</h4><p>修改配置文件vim &#x2F;etc&#x2F;my.cnf（没有就新建）</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>client<span class=\"token punctuation\">]</span>\n<span class=\"token assign-left variable\">default_character_set</span><span class=\"token operator\">=</span>utf8mb4\n\n<span class=\"token punctuation\">[</span>mysql<span class=\"token punctuation\">]</span>\n<span class=\"token assign-left variable\">default_character_set</span><span class=\"token operator\">=</span>utf8mb4\n\n<span class=\"token punctuation\">[</span>mysqld<span class=\"token punctuation\">]</span>\n<span class=\"token comment\"># *\t接收所有的IPv4或IPv6连接请求</span>\n<span class=\"token comment\"># 0.0.0.0接受所有的IPv4地址</span>\n<span class=\"token comment\"># ::接受所有的IPv4或IPv6地址</span>\n<span class=\"token comment\"># IPv4-mapped接受所有的IPv4地址或IPv4邦定格式的地址（例 ::ffff:127.0.0.1）</span>\n<span class=\"token comment\"># IPv4（IPv6）只接受对应的IPv4（IPv6）地址</span>\nbind-address<span class=\"token operator\">=</span><span class=\"token number\">0.0</span>.0.0\n<span class=\"token comment\"># port=3306</span>\n<span class=\"token comment\"># 指定安装用户</span>\n<span class=\"token assign-left variable\">user</span><span class=\"token operator\">=</span>mysql\n<span class=\"token assign-left variable\">basedir</span><span class=\"token operator\">=</span>/usr/local/mysql\n<span class=\"token assign-left variable\">datadir</span><span class=\"token operator\">=</span>/usr/local/mysql/data\n<span class=\"token assign-left variable\">socket</span><span class=\"token operator\">=</span>/tmp/mysql.sock\nlog-error<span class=\"token operator\">=</span>/usr/local/mysql/mysql.err\npid-file<span class=\"token operator\">=</span>/usr/local/mysql/data/mysql/mysql.pid\n<span class=\"token assign-left variable\">character_set_server</span><span class=\"token operator\">=</span>utf8mb4\n<span class=\"token comment\"># 符号连接,如果设置为1,则mysql数据库和表里的数据支持储存在datadir目录之外的路径下,默认都是0</span>\nsymbolic-links<span class=\"token operator\">=</span><span class=\"token number\">0</span>\n<span class=\"token comment\"># 默认情况下，timestamp类型字段所在数据行被更新时，该字段会自动更新为当前时间，而参数explicit_defaults_for_timestamp控制这一种行为。</span>\n<span class=\"token comment\"># 数据行更新时，timestamp类型字段更新为当前时间</span>\n<span class=\"token comment\"># explicit_defaults_for_timestamp=off</span>\n<span class=\"token comment\"># 数据行更新时，timestamp类型字段不更新为当前时间。</span>\n<span class=\"token comment\"># explicit_defaults_for_timestamp=on</span>\n<span class=\"token comment\"># 允许最大连接数</span>\n<span class=\"token assign-left variable\">max_connections</span><span class=\"token operator\">=</span><span class=\"token number\">200</span>\ndefault-storage-engine<span class=\"token operator\">=</span>INNODB\n<span class=\"token comment\"># 连接层默认字符集</span>\ncollation-server<span class=\"token operator\">=</span>utf8mb4_unicode_ci\n<span class=\"token assign-left variable\">wait_timeout</span><span class=\"token operator\">=</span><span class=\"token number\">31536000</span>\n<span class=\"token assign-left variable\">interactive_timeout</span><span class=\"token operator\">=</span><span class=\"token number\">31536000</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>进入安装mysql软件目录<code>cd mysql/</code>,修改目录拥有者为mysql用户<code>chown -R mysql:mysql ./</code></p>\n<h5 id=\"5-6版本\"><a href=\"#5-6版本\" class=\"headerlink\" title=\"5.6版本\"></a>5.6版本</h5><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># --defaults-file指定配置文件 --basedir指定Mysql安装目录 --datadir指定数据目录 --user所属用户</span>\n./scripts/mysql_install_db <span class=\"token parameter variable\">--user</span><span class=\"token operator\">=</span>mysql <span class=\"token parameter variable\">--basedir</span><span class=\"token operator\">=</span>/usr/local/mysql <span class=\"token parameter variable\">--datadir</span><span class=\"token operator\">=</span>/usr/local/mysql/data<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<blockquote>\n<p>此处可能出现错误</p>\n<p><strong>错误1</strong>：命令报错<code>-bash: ./scripts/mysql_install_db: /usr/bin/perl: bad interpreter: No such file or directory.</code>貌似提示注释器错误，没有&#x2F;usr&#x2F;bin&#x2F;perl文件或者档案<br><strong>解决办法</strong>:（安装perl跟perl-devel即可）：执行<strong>yum -y install perl perl-devel</strong>后在初始化数据库即可。</p>\n<p><strong>错误2</strong>：<code>FATAL ERROR: please install the following Perl modules before executing * Data::Dumper</code><br><strong>解决办法:yum install -y perl-Data-Dumper</strong></p>\n<p>修改当前目录拥有者为root用户</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">chown</span> <span class=\"token parameter variable\">-R</span> root:root ./<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>再次运行</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">./scripts/mysql_install_db <span class=\"token parameter variable\">--user</span><span class=\"token operator\">=</span>mysql <span class=\"token parameter variable\">--basedir</span><span class=\"token operator\">=</span>/usr/local/mysql <span class=\"token parameter variable\">--datadir</span><span class=\"token operator\">=</span>/usr/local/mysql/data<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>修改当前data目录拥有者为mysql用户</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">chown</span> <span class=\"token parameter variable\">-R</span> mysql:mysql data<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n</blockquote>\n<h5 id=\"5-7版本\"><a href=\"#5-7版本\" class=\"headerlink\" title=\"5.7版本\"></a>5.7版本</h5><p>执行命令</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">./mysqld --defaults-file<span class=\"token operator\">=</span>/etc/my.cnf <span class=\"token parameter variable\">--basedir</span><span class=\"token operator\">=</span>/usr/local/mysql/ <span class=\"token parameter variable\">--datadir</span><span class=\"token operator\">=</span>/usr/local/mysql/data/ <span class=\"token parameter variable\">--user</span><span class=\"token operator\">=</span>mysql <span class=\"token parameter variable\">--initialize</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>查看初始密码,控制台查看或者<code>cat /usr/local/mysql/mysql.err</code>localhost:后面的一串字符就是初始密码</p>\n<h5 id=\"8-0版本\"><a href=\"#8-0版本\" class=\"headerlink\" title=\"8.0版本\"></a>8.0版本</h5><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">bin/mysqld <span class=\"token parameter variable\">--user</span><span class=\"token operator\">=</span>mysql <span class=\"token parameter variable\">--initialize</span> <span class=\"token parameter variable\">--datadir</span><span class=\"token operator\">=</span>/usr/local/mysql/data<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>root@localhost之后的一串字符就是初始密码</p>\n<blockquote>\n<p><strong>错误1</strong>：服务未成功启动查看data目录下的localhost.localdomain.err错误日志<br>遇到<code>Can&#39;t start server : Bind on unix socket: Address already in use Do you already have another mysqld server running on socket: /tmp/mysql.sock ?</code>解决方法是删除 rm -rf &#x2F;tmp&#x2F;mysql.sock(由于以前安装过mysql的原因)</p>\n<p><strong>错误2</strong>：.&#x2F;mysqld: error while loading shared libraries: libnuma.so.1: cannot open shared object file: No such file or directory就执行下<code>yum install -y libaio</code>、<code> yum -y install numactl</code>后再执行初始化</p>\n</blockquote>\n<h4 id=\"5-启动mysql\"><a href=\"#5-启动mysql\" class=\"headerlink\" title=\"5. 启动mysql\"></a>5. 启动mysql</h4><p>添加开机启动，把启动脚本放到开机初始化目录。</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">cp</span> /usr/local/mysql/support-files/mysql.server /etc/init.d/mysql<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>赋予可执行权限</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">chmod</span> +x /etc/init.d/mysql<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>启动mysql服务</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">service</span> mysql start<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"6-修改密码\"><a href=\"#6-修改密码\" class=\"headerlink\" title=\"6. 修改密码\"></a>6. 修改密码</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># 测试进入mysql</span>\nmysql <span class=\"token parameter variable\">-uroot</span> <span class=\"token parameter variable\">-proot</span>\n<span class=\"token comment\"># UPDATE直接编辑user表</span>\nupdate mysql.user <span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">password</span><span class=\"token operator\">=</span>password<span class=\"token punctuation\">(</span><span class=\"token string\">'新密码'</span><span class=\"token punctuation\">)</span> where <span class=\"token assign-left variable\">host</span><span class=\"token operator\">=</span><span class=\"token string\">'localhost'</span> and <span class=\"token assign-left variable\">user</span><span class=\"token operator\">=</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># 或者使用SET PASSWORD命令</span>\n<span class=\"token builtin class-name\">set</span> password <span class=\"token keyword\">for</span> root@localhost <span class=\"token operator\">=</span> password<span class=\"token punctuation\">(</span><span class=\"token string\">'新密码'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># 或者使用mysqladmin修改密码</span>\n./bin/mysqladmin <span class=\"token parameter variable\">-hlocalhost.localdomain</span> <span class=\"token parameter variable\">-uroot</span> -p旧密码 password <span class=\"token string\">'新密码'</span>\n<span class=\"token comment\"># MySQL8使用</span>\nupdate user <span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">authentication_string</span><span class=\"token operator\">=</span><span class=\"token string\">''</span> where <span class=\"token assign-left variable\">user</span><span class=\"token operator\">=</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">;</span><span class=\"token comment\"># 将字段置为空</span>\nALTER user <span class=\"token string\">'root'</span>@<span class=\"token string\">'localhost'</span> IDENTIFIED BY <span class=\"token string\">'root'</span><span class=\"token punctuation\">;</span><span class=\"token comment\">#修改密码为root</span>\nALTER <span class=\"token environment constant\">USER</span> <span class=\"token string\">'root'</span>@<span class=\"token string\">'localhost'</span> IDENTIFIED WITH mysql_native_password BY <span class=\"token string\">'新密码'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># 进入mysql更改密码</span>\n<span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">password</span><span class=\"token operator\">=</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># 使密码生效</span>\nflush privileges<span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h4 id=\"7-修改远程连接\"><a href=\"#7-修改远程连接\" class=\"headerlink\" title=\"7. 修改远程连接\"></a>7. 修改远程连接</h4><p>改表法</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">use mysql\nupdate user <span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">host</span><span class=\"token operator\">=</span><span class=\"token string\">'%'</span> where <span class=\"token assign-left variable\">user</span><span class=\"token operator\">=</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">;</span>\nflush privileges<span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>授权法</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">GRANT ALL PRIVILEGES ON *.* TO <span class=\"token string\">'root'</span>@<span class=\"token string\">'%'</span> IDENTIFIED BY <span class=\"token string\">'密码'</span> WITH GRANT OPTION<span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># 如果你想允许用户myuser从ip为192.168.1.6的主机连接到mysql服务器，并使用mypassword作为密码</span>\nGRANT ALL PRIVILEGES ON *.* TO <span class=\"token string\">'myuser'</span>@<span class=\"token string\">'192.168.1.3'</span> IDENTIFIED BY <span class=\"token string\">'mypassword'</span> WITH GRANT OPTION<span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<h4 id=\"8-其他\"><a href=\"#8-其他\" class=\"headerlink\" title=\"8. 其他\"></a>8. 其他</h4><p>添加服务自启动</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">chkconfig</span> <span class=\"token parameter variable\">--add</span> mysql<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>显示服务列表</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">chkconfig</span> <span class=\"token parameter variable\">--list</span>\n<span class=\"token comment\"># 如果看到mysql的服务，并且3,4,5都是on的话则成功，如果是off，则执行</span>\n<span class=\"token function\">chkconfig</span> <span class=\"token parameter variable\">--level</span> <span class=\"token number\">345</span> mysql on<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<blockquote>\n<p>假如服务未成功启动<a href=\"http://blog.csdn.net/duyuanhai/article/details/78604894\">log-error set to ‘&#x2F;var&#x2F;log&#x2F;mariadb&#x2F;mariadb.log’, however file don’t exists</a><strong>报错的情况下执行以下操作</strong>:需要创建报错中缺失的文件夹<code>mkdir z/var/log/mariadb，touch /var/log/mariadb/mariadb.log</code></p>\n</blockquote>\n<p>创建软连接</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">ln</span> <span class=\"token parameter variable\">-s</span> /usr/local/mysql/bin/mysql /usr/local/bin/mysql<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>mysql -uroot -proot无法连接的话</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">ln</span> <span class=\"token parameter variable\">-s</span> /var/lib/mysql/mysql.sock /tmp/mysql.sock<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>默认配置文件路径如下</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">配置文件：&#x2F;etc&#x2F;my.cnf\n日志文件：&#x2F;var&#x2F;log&#x2F;var&#x2F;log&#x2F;mysqld.log\n服务启动脚本：&#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;mysqld.service\nsocket文件：&#x2F;var&#x2F;run&#x2F;mysqld&#x2F;mysqld.pid<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"yum安装\"><a href=\"#yum安装\" class=\"headerlink\" title=\"yum安装\"></a>yum安装</h3><h4 id=\"一、安装本地YUM源、MySQL在MySQL官网中下载YUM源rpm安装包\"><a href=\"#一、安装本地YUM源、MySQL在MySQL官网中下载YUM源rpm安装包\" class=\"headerlink\" title=\"一、安装本地YUM源、MySQL在MySQL官网中下载YUM源rpm安装包\"></a>一、安装本地YUM源、MySQL在MySQL官网中下载YUM源rpm安装包</h4><ol>\n<li>把上面的rpm文件下载下来放到服务器上,或者在linux系统中通过wget命令下载</li>\n</ol>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">wget</span> http://dev.mysql.com/get/mysql80-community-release-el7-1.noarch.rpm<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<ol start=\"2\">\n<li>下载完成后使用yum命令本地安装yum源<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">yum localinstall mysql80-community-release-el7-1.noarch.rpm<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></li>\n<li>执行完毕后使用下面的命令检查是否安装成功<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">yum repolist enabled <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token string\">\"mysql.*-community.*\"</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></li>\n<li>安装服务器<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">yum <span class=\"token function\">install</span> <span class=\"token parameter variable\">-y</span> mysql-community-server<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></li>\n</ol>\n<h4 id=\"二、配置MySQL\"><a href=\"#二、配置MySQL\" class=\"headerlink\" title=\"二、配置MySQL\"></a>二、配置MySQL</h4><p>服务命令</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># 启动MySQL服务</span>\nsystemctl start mysqld\n<span class=\"token comment\"># 查看服务启动状态</span>\nsystemctl status mysqld\n<span class=\"token comment\"># 开机启动</span>\nsystemctl <span class=\"token builtin class-name\">enable</span> mysqld\n<span class=\"token comment\"># 重新加载开机启动配置</span>\nsystemctl daemon-reload\n\n<span class=\"token comment\"># 修改root默认密码</span>\n<span class=\"token comment\"># 查询默认密码</span>\n<span class=\"token function\">cat</span> /var/log/mysqld.log <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token string\">'temporary password'</span>\n<span class=\"token comment\"># 登录mysql,用刚才从文件中找到的密码</span>\nmysql <span class=\"token parameter variable\">-uroot</span> <span class=\"token parameter variable\">-p</span>\n<span class=\"token comment\"># 尝试修改密码,使用下面的命令修改root用户的密码</span>\nALTER <span class=\"token environment constant\">USER</span> <span class=\"token string\">'root'</span>@<span class=\"token string\">'localhost'</span> IDENTIFIED WITH mysql_native_password BY <span class=\"token string\">'你的密码'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># 添加远程登陆</span>\n<span class=\"token comment\"># 创建一个能全局访问的用户root</span>\n<span class=\"token comment\"># CREATE USER 'root'@'%' IDENTIFIED BY 你的密码'';</span>\n<span class=\"token comment\"># 给用户授权任何远程主机都可以访问数据库 </span>\nGRANT ALL PRIVILEGES ON *.* TO <span class=\"token string\">'root'</span>@<span class=\"token string\">'%'</span>WITH GRANT OPTION<span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># 输入刷新命令使修改生效</span>\nFLUSH PRIVILEGES<span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># 修改密码的加密方式</span>\n<span class=\"token comment\"># 找到mysql的配置文件vim /etc/my.cnf，把密码的加密方式改成之前版本的,8.0版本更换了密码的加密方式,我们就先用旧的</span>\n<span class=\"token comment\"># 找到default-authentication-plugin，将其注释取消</span>\ndefault-authentication-plugin<span class=\"token operator\">=</span>mysql_native_password\n<span class=\"token comment\"># 修改完my.cnf后重启服务，使其生效</span>\nsystemctl restart mysqld\n\n<span class=\"token comment\"># sql_mode=only_full_group_by问题</span>\n<span class=\"token comment\"># 查看sql_mode</span>\n<span class=\"token keyword\">select</span> @@global.sql_mode<span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># 查询出来的值为：</span>\nONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION\n\n<span class=\"token comment\"># 修改my.cnf，在[mysqld]栏下新增sql_mode，将ONLY_FULL_GROUP_BY去掉</span>\n<span class=\"token function\">vim</span> /etc/my.cnf\n<span class=\"token assign-left variable\">sql_mode</span><span class=\"token operator\">=</span><span class=\"token string\">'STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION'</span>\n<span class=\"token comment\"># 重启服务</span>\nsystemctl restart mysqld<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"rpm安装\"><a href=\"#rpm安装\" class=\"headerlink\" title=\"rpm安装\"></a>rpm安装</h3><ol>\n<li>需要通过rpm相关指令，来查询当前系统中是否存在已安装的mysql软件包<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># 查询当前系统中安装的所有软件</span>\n<span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-qa</span>\n<span class=\"token comment\"># 查询当前系统中安装的名称带mysql的软件</span>\n<span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-qa</span> <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> mysql\n<span class=\"token comment\"># 查询当前系统中安装的名称带mariadb的软件</span>\n<span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-qa</span> <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> mariadb<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li>卸载<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-ev</span> <span class=\"token parameter variable\">--nodeps</span> 软件名称\n<span class=\"token comment\"># 卸载之前请先关闭mysql服务，命令如下</span>\nsystemctl stop mysqld\n<span class=\"token comment\"># 依次卸载相关服务</span>\n<span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-e</span> <span class=\"token parameter variable\">--nodeps</span> mysql-community-server\n<span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-e</span> <span class=\"token parameter variable\">--nodeps</span> mysql-community-client\n<span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-e</span> <span class=\"token parameter variable\">--nodeps</span> mysql-community-libs\n<span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-e</span> <span class=\"token parameter variable\">--nodeps</span> mysql-community-common\n<span class=\"token comment\">#卸载mariadb</span>\n<span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-e</span> <span class=\"token parameter variable\">--nodeps</span> mariadb-libs-5.5.64-1.el7.x86_64\n<span class=\"token comment\"># 删除数据库配置文件</span>\n<span class=\"token function\">rm</span> <span class=\"token parameter variable\">-rf</span> /etc/my.cnf\n<span class=\"token comment\"># 删除数据库数据文件</span>\n<span class=\"token function\">rm</span> <span class=\"token parameter variable\">-rf</span> /var/lib/mysql\n<span class=\"token comment\"># 删除日志临时文件</span>\n<span class=\"token function\">rm</span> <span class=\"token parameter variable\">-rf</span> /var/log/mysqld.log<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li>下载rpm<br><img src=\"https://img-blog.csdnimg.cn/img_convert/7ec61ebdc9103cd70f3dd52efbd4ea19.png\" alt=\"下载\"><br>或者使用wget<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># 下载server包</span>\n<span class=\"token function\">wget</span> https://cdn.mysql.com//Downloads/MySQL-5.7/mysql-community-server-5.7.38-1.el7.x86_64.rpm\n<span class=\"token comment\"># 下载client包</span>\n<span class=\"token function\">wget</span> https://cdn.mysql.com//Downloads/MySQL-5.7/mysql-community-client-5.7.38-1.el7.x86_64.rpm\n<span class=\"token comment\"># 下载common包</span>\n<span class=\"token function\">wget</span> https://cdn.mysql.com//Downloads/MySQL-5.7/mysql-community-common-5.7.38-1.el7.x86_64.rpm\n<span class=\"token comment\"># 下载libs包</span>\n<span class=\"token function\">wget</span> https://cdn.mysql.com//Downloads/MySQL-5.7/mysql-community-libs-5.7.38-1.el7.x86_64.rpm<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li>安装<blockquote>\n<p>包之间相互依赖，所以必须注意安装顺序</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># 相关依赖</span>\nyum <span class=\"token function\">install</span> libaio <span class=\"token parameter variable\">-y</span>\nyum <span class=\"token function\">install</span> net-tools <span class=\"token parameter variable\">-y</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre></blockquote>\n</li>\n</ol>\n<p>先装common,再装libs（确保mariadb已卸载，centos7默认支持mariadb，不支持mysql，不卸载会出现冲突）,再装client,最后装server</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># i表示install安装；v表示verbose进度条；h表示hash哈希校验。</span>\n<span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-ivh</span> mysql-community-common-8.0.11-1.el7.x86_64.rpm\n<span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-ivh</span> mysql-community-libs-8.0.11-1.el7.x86_64.rpm\n<span class=\"token comment\"># rpm -ivh mysql-community-devel-5.7.25-1.el7.x86_64.rpm</span>\n<span class=\"token comment\"># rpm -ivh mysql-community-libs-compat-5.7.25-1.el7.x86_64.rpm</span>\n<span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-ivh</span> mysql-community-client-8.0.11-1.el7.x86_64.rpm\n<span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-ivh</span> mysql-community-server-8.0.11-1.el7.x86_64.rpm<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<ol start=\"5\">\n<li>查看密码</li>\n</ol>\n<p>对于rpm安装的mysql，在mysql第一次启动时，会自动帮我们生成root用户的访问密码，并且输出在mysql的日志文件&#x2F;var&#x2F;log&#x2F;mysqld.log中，我们可以查看这份日志文件，从而获取到访问密码</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">grep</span> <span class=\"token string\">'temporary password'</span> /var/log/mysqld.log\n<span class=\"token comment\"># 或者</span>\n<span class=\"token function\">cat</span> /var/log/mysqld.log <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> password<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<ol start=\"6\">\n<li>配置其他内容如编码则新建<code>/etc/my.cnf</code></li>\n</ol>\n<h2 id=\"windows安装MySQL\"><a href=\"#windows安装MySQL\" class=\"headerlink\" title=\"windows安装MySQL\"></a>windows安装MySQL</h2><h3 id=\"卸载\"><a href=\"#卸载\" class=\"headerlink\" title=\"卸载\"></a>卸载</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">关闭mysql服务:net stop mysql\n删除mysql服务:mysqld -remove\n删除mysql相关文件夹，如想保留数据可保留data文件<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h3><ol>\n<li>解压mysql压缩包后进入mysql目录，新建my.ini文件并编辑</li>\n</ol>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>mysqld<span class=\"token punctuation\">]</span>\n<span class=\"token comment\"># 设置3306端口</span>\nport <span class=\"token operator\">=</span> <span class=\"token number\">3306</span>\n<span class=\"token comment\"># 设置mysql的安装目录</span>\n<span class=\"token assign-left variable\">basedir</span><span class=\"token operator\">=</span>D:<span class=\"token punctuation\">\\</span>mysql<span class=\"token punctuation\">\\</span>mysql-5.8.11-winx64\n<span class=\"token comment\"># 设置mysql数据库的数据的存放目录</span>\n<span class=\"token assign-left variable\">datadir</span><span class=\"token operator\">=</span>D:<span class=\"token punctuation\">\\</span>mysql<span class=\"token punctuation\">\\</span>mysql-5.8.11-winx64<span class=\"token punctuation\">\\</span>data\n<span class=\"token comment\"># 允许最大连接数</span>\n<span class=\"token assign-left variable\">max_connections</span><span class=\"token operator\">=</span><span class=\"token number\">200</span>\n<span class=\"token comment\"># 创建新表时将使用的默认存储引擎</span>\ndefault-storage-engine<span class=\"token operator\">=</span>INNODB<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<ol start=\"2\">\n<li><p>将mysql加入环境变量</p>\n</li>\n<li><p>管理员打开cmd切换到mysql bin目录下(一定要切换),执行<strong>mysqld install</strong>安装mysql服务，成功打印<strong>service successfully installed</strong>后执行<strong>mysqld –initialize –console</strong>会对数据库做初始化并打印相应日志：可以找到root@localhost之后的一串字符就是初始密码，然后执行net start mysql开启服务</p>\n</li>\n<li><p>修改密码（5.7版本以前）</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># mysql -uroot -p输入密码后</span>\n<span class=\"token builtin class-name\">set</span> password <span class=\"token keyword\">for</span> root@localhost <span class=\"token operator\">=</span> password<span class=\"token punctuation\">(</span><span class=\"token string\">'123456'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># 8.0修改密码</span>\n<span class=\"token builtin class-name\">set</span> password <span class=\"token operator\">=</span> <span class=\"token string\">'123456'</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre></li>\n</ol>\n<h3 id=\"8-0连接navicat\"><a href=\"#8-0连接navicat\" class=\"headerlink\" title=\"8.0连接navicat\"></a>8.0连接navicat</h3><p>navicat连接8.0需要把mysql用户登录密码加密规则还原成mysql_native_password</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">ALTER <span class=\"token environment constant\">USER</span> <span class=\"token string\">'root'</span>@<span class=\"token string\">'localhost'</span> IDENTIFIED BY <span class=\"token string\">'root'</span> PASSWORD EXPIRE NEVER<span class=\"token punctuation\">;</span> <span class=\"token comment\">#修改加密规则</span>\nALTER <span class=\"token environment constant\">USER</span> <span class=\"token string\">'root'</span>@<span class=\"token string\">'localhost'</span> IDENTIFIED WITH mysql_native_password BY <span class=\"token string\">'root'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">#更新一下用户的密码</span>\nFLUSH PRIVILEGES<span class=\"token punctuation\">;</span> <span class=\"token comment\">#刷新权限</span>\n<span class=\"token comment\"># 然后use mysql;</span>\nupdate user <span class=\"token builtin class-name\">set</span> <span class=\"token function\">host</span> <span class=\"token operator\">=</span> <span class=\"token string\">'%'</span> where user <span class=\"token operator\">=</span> <span class=\"token string\">'root'</span><span class=\"token punctuation\">;</span>\nFLUSH PRIVILEGES<span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"相关文章\"><a href=\"#相关文章\" class=\"headerlink\" title=\"相关文章\"></a>相关文章</h2><ul>\n<li><a href=\"https://mp.weixin.qq.com/s?__biz=MzkzODE3OTI0Ng==&mid=2247491190&idx=1&sn=6e6ed61a51e2f214d19e304038bde8b4&source=41#wechat_redirect\">一文教你在CentOS7下安装MySQL及搭建主从复制</a></li>\n<li><a href=\"https://mp.weixin.qq.com/s/R89aCCFvCvudLp6FUn2JjQ\">手把手教大家搭建MySQL主从复制</a></li>\n</ul>\n","more":"<h2 id=\"Linux安装MySQL\"><a href=\"#Linux安装MySQL\" class=\"headerlink\" title=\"Linux安装MySQL\"></a>Linux安装MySQL</h2><h3 id=\"压缩包安装\"><a href=\"#压缩包安装\" class=\"headerlink\" title=\"压缩包安装\"></a>压缩包安装</h3><h4 id=\"1-下载\"><a href=\"#1-下载\" class=\"headerlink\" title=\"1. 下载\"></a>1. 下载</h4><p><del><a href=\"https://downloads.mysql.com/archives/community/\">MySQL下载地址</a></del>,<a href=\"https://dev.mysql.com/downloads/\">MySQL下载地址</a>下载后将安装包上传usr&#x2F;local</p>\n<h4 id=\"2-解压\"><a href=\"#2-解压\" class=\"headerlink\" title=\"2. 解压\"></a>2. 解压</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">tar</span> <span class=\"token parameter variable\">-zxvf</span> mysql-5.6.33-linux-glibc2.5-x86_64.tar.gz<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<blockquote>\n<p>解压后位置usr&#x2F;local&#x2F;mysql</p>\n</blockquote>\n<h4 id=\"3-创建用户及用户组\"><a href=\"#3-创建用户及用户组\" class=\"headerlink\" title=\"3. 创建用户及用户组\"></a>3. 创建用户及用户组</h4><p>先检查是否有mysql用户组和mysql用户,没有就添加</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># 查看所有用户</span>\n<span class=\"token function\">cat</span> /etc/passwd\n<span class=\"token comment\"># 查看用户组</span>\n<span class=\"token function\">groups</span> mysql\n<span class=\"token comment\"># 添加用户组</span>\n<span class=\"token function\">groupadd</span> mysql\n<span class=\"token comment\"># 删除用户组 groupdel</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>添加用户mysql然后将mysql用户添加到到用户组mysql</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># -r建立系统帐号 -g&lt;群组>指定用户所属的群组。</span>\n<span class=\"token function\">useradd</span> <span class=\"token parameter variable\">-r</span> <span class=\"token parameter variable\">-g</span> mysql mysql\n<span class=\"token comment\"># userdel删除</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"4-操作\"><a href=\"#4-操作\" class=\"headerlink\" title=\"4. 操作\"></a>4. 操作</h4><p>修改配置文件vim &#x2F;etc&#x2F;my.cnf（没有就新建）</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>client<span class=\"token punctuation\">]</span>\n<span class=\"token assign-left variable\">default_character_set</span><span class=\"token operator\">=</span>utf8mb4\n\n<span class=\"token punctuation\">[</span>mysql<span class=\"token punctuation\">]</span>\n<span class=\"token assign-left variable\">default_character_set</span><span class=\"token operator\">=</span>utf8mb4\n\n<span class=\"token punctuation\">[</span>mysqld<span class=\"token punctuation\">]</span>\n<span class=\"token comment\"># *\t接收所有的IPv4或IPv6连接请求</span>\n<span class=\"token comment\"># 0.0.0.0接受所有的IPv4地址</span>\n<span class=\"token comment\"># ::接受所有的IPv4或IPv6地址</span>\n<span class=\"token comment\"># IPv4-mapped接受所有的IPv4地址或IPv4邦定格式的地址（例 ::ffff:127.0.0.1）</span>\n<span class=\"token comment\"># IPv4（IPv6）只接受对应的IPv4（IPv6）地址</span>\nbind-address<span class=\"token operator\">=</span><span class=\"token number\">0.0</span>.0.0\n<span class=\"token comment\"># port=3306</span>\n<span class=\"token comment\"># 指定安装用户</span>\n<span class=\"token assign-left variable\">user</span><span class=\"token operator\">=</span>mysql\n<span class=\"token assign-left variable\">basedir</span><span class=\"token operator\">=</span>/usr/local/mysql\n<span class=\"token assign-left variable\">datadir</span><span class=\"token operator\">=</span>/usr/local/mysql/data\n<span class=\"token assign-left variable\">socket</span><span class=\"token operator\">=</span>/tmp/mysql.sock\nlog-error<span class=\"token operator\">=</span>/usr/local/mysql/mysql.err\npid-file<span class=\"token operator\">=</span>/usr/local/mysql/data/mysql/mysql.pid\n<span class=\"token assign-left variable\">character_set_server</span><span class=\"token operator\">=</span>utf8mb4\n<span class=\"token comment\"># 符号连接,如果设置为1,则mysql数据库和表里的数据支持储存在datadir目录之外的路径下,默认都是0</span>\nsymbolic-links<span class=\"token operator\">=</span><span class=\"token number\">0</span>\n<span class=\"token comment\"># 默认情况下，timestamp类型字段所在数据行被更新时，该字段会自动更新为当前时间，而参数explicit_defaults_for_timestamp控制这一种行为。</span>\n<span class=\"token comment\"># 数据行更新时，timestamp类型字段更新为当前时间</span>\n<span class=\"token comment\"># explicit_defaults_for_timestamp=off</span>\n<span class=\"token comment\"># 数据行更新时，timestamp类型字段不更新为当前时间。</span>\n<span class=\"token comment\"># explicit_defaults_for_timestamp=on</span>\n<span class=\"token comment\"># 允许最大连接数</span>\n<span class=\"token assign-left variable\">max_connections</span><span class=\"token operator\">=</span><span class=\"token number\">200</span>\ndefault-storage-engine<span class=\"token operator\">=</span>INNODB\n<span class=\"token comment\"># 连接层默认字符集</span>\ncollation-server<span class=\"token operator\">=</span>utf8mb4_unicode_ci\n<span class=\"token assign-left variable\">wait_timeout</span><span class=\"token operator\">=</span><span class=\"token number\">31536000</span>\n<span class=\"token assign-left variable\">interactive_timeout</span><span class=\"token operator\">=</span><span class=\"token number\">31536000</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>进入安装mysql软件目录<code>cd mysql/</code>,修改目录拥有者为mysql用户<code>chown -R mysql:mysql ./</code></p>\n<h5 id=\"5-6版本\"><a href=\"#5-6版本\" class=\"headerlink\" title=\"5.6版本\"></a>5.6版本</h5><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># --defaults-file指定配置文件 --basedir指定Mysql安装目录 --datadir指定数据目录 --user所属用户</span>\n./scripts/mysql_install_db <span class=\"token parameter variable\">--user</span><span class=\"token operator\">=</span>mysql <span class=\"token parameter variable\">--basedir</span><span class=\"token operator\">=</span>/usr/local/mysql <span class=\"token parameter variable\">--datadir</span><span class=\"token operator\">=</span>/usr/local/mysql/data<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<blockquote>\n<p>此处可能出现错误</p>\n<p><strong>错误1</strong>：命令报错<code>-bash: ./scripts/mysql_install_db: /usr/bin/perl: bad interpreter: No such file or directory.</code>貌似提示注释器错误，没有&#x2F;usr&#x2F;bin&#x2F;perl文件或者档案<br><strong>解决办法</strong>:（安装perl跟perl-devel即可）：执行<strong>yum -y install perl perl-devel</strong>后在初始化数据库即可。</p>\n<p><strong>错误2</strong>：<code>FATAL ERROR: please install the following Perl modules before executing * Data::Dumper</code><br><strong>解决办法:yum install -y perl-Data-Dumper</strong></p>\n<p>修改当前目录拥有者为root用户</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">chown</span> <span class=\"token parameter variable\">-R</span> root:root ./<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>再次运行</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">./scripts/mysql_install_db <span class=\"token parameter variable\">--user</span><span class=\"token operator\">=</span>mysql <span class=\"token parameter variable\">--basedir</span><span class=\"token operator\">=</span>/usr/local/mysql <span class=\"token parameter variable\">--datadir</span><span class=\"token operator\">=</span>/usr/local/mysql/data<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>修改当前data目录拥有者为mysql用户</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">chown</span> <span class=\"token parameter variable\">-R</span> mysql:mysql data<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n</blockquote>\n<h5 id=\"5-7版本\"><a href=\"#5-7版本\" class=\"headerlink\" title=\"5.7版本\"></a>5.7版本</h5><p>执行命令</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">./mysqld --defaults-file<span class=\"token operator\">=</span>/etc/my.cnf <span class=\"token parameter variable\">--basedir</span><span class=\"token operator\">=</span>/usr/local/mysql/ <span class=\"token parameter variable\">--datadir</span><span class=\"token operator\">=</span>/usr/local/mysql/data/ <span class=\"token parameter variable\">--user</span><span class=\"token operator\">=</span>mysql <span class=\"token parameter variable\">--initialize</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>查看初始密码,控制台查看或者<code>cat /usr/local/mysql/mysql.err</code>localhost:后面的一串字符就是初始密码</p>\n<h5 id=\"8-0版本\"><a href=\"#8-0版本\" class=\"headerlink\" title=\"8.0版本\"></a>8.0版本</h5><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">bin/mysqld <span class=\"token parameter variable\">--user</span><span class=\"token operator\">=</span>mysql <span class=\"token parameter variable\">--initialize</span> <span class=\"token parameter variable\">--datadir</span><span class=\"token operator\">=</span>/usr/local/mysql/data<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>root@localhost之后的一串字符就是初始密码</p>\n<blockquote>\n<p><strong>错误1</strong>：服务未成功启动查看data目录下的localhost.localdomain.err错误日志<br>遇到<code>Can&#39;t start server : Bind on unix socket: Address already in use Do you already have another mysqld server running on socket: /tmp/mysql.sock ?</code>解决方法是删除 rm -rf &#x2F;tmp&#x2F;mysql.sock(由于以前安装过mysql的原因)</p>\n<p><strong>错误2</strong>：.&#x2F;mysqld: error while loading shared libraries: libnuma.so.1: cannot open shared object file: No such file or directory就执行下<code>yum install -y libaio</code>、<code> yum -y install numactl</code>后再执行初始化</p>\n</blockquote>\n<h4 id=\"5-启动mysql\"><a href=\"#5-启动mysql\" class=\"headerlink\" title=\"5. 启动mysql\"></a>5. 启动mysql</h4><p>添加开机启动，把启动脚本放到开机初始化目录。</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">cp</span> /usr/local/mysql/support-files/mysql.server /etc/init.d/mysql<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>赋予可执行权限</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">chmod</span> +x /etc/init.d/mysql<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>启动mysql服务</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">service</span> mysql start<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"6-修改密码\"><a href=\"#6-修改密码\" class=\"headerlink\" title=\"6. 修改密码\"></a>6. 修改密码</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># 测试进入mysql</span>\nmysql <span class=\"token parameter variable\">-uroot</span> <span class=\"token parameter variable\">-proot</span>\n<span class=\"token comment\"># UPDATE直接编辑user表</span>\nupdate mysql.user <span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">password</span><span class=\"token operator\">=</span>password<span class=\"token punctuation\">(</span><span class=\"token string\">'新密码'</span><span class=\"token punctuation\">)</span> where <span class=\"token assign-left variable\">host</span><span class=\"token operator\">=</span><span class=\"token string\">'localhost'</span> and <span class=\"token assign-left variable\">user</span><span class=\"token operator\">=</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># 或者使用SET PASSWORD命令</span>\n<span class=\"token builtin class-name\">set</span> password <span class=\"token keyword\">for</span> root@localhost <span class=\"token operator\">=</span> password<span class=\"token punctuation\">(</span><span class=\"token string\">'新密码'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># 或者使用mysqladmin修改密码</span>\n./bin/mysqladmin <span class=\"token parameter variable\">-hlocalhost.localdomain</span> <span class=\"token parameter variable\">-uroot</span> -p旧密码 password <span class=\"token string\">'新密码'</span>\n<span class=\"token comment\"># MySQL8使用</span>\nupdate user <span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">authentication_string</span><span class=\"token operator\">=</span><span class=\"token string\">''</span> where <span class=\"token assign-left variable\">user</span><span class=\"token operator\">=</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">;</span><span class=\"token comment\"># 将字段置为空</span>\nALTER user <span class=\"token string\">'root'</span>@<span class=\"token string\">'localhost'</span> IDENTIFIED BY <span class=\"token string\">'root'</span><span class=\"token punctuation\">;</span><span class=\"token comment\">#修改密码为root</span>\nALTER <span class=\"token environment constant\">USER</span> <span class=\"token string\">'root'</span>@<span class=\"token string\">'localhost'</span> IDENTIFIED WITH mysql_native_password BY <span class=\"token string\">'新密码'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># 进入mysql更改密码</span>\n<span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">password</span><span class=\"token operator\">=</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># 使密码生效</span>\nflush privileges<span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h4 id=\"7-修改远程连接\"><a href=\"#7-修改远程连接\" class=\"headerlink\" title=\"7. 修改远程连接\"></a>7. 修改远程连接</h4><p>改表法</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">use mysql\nupdate user <span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">host</span><span class=\"token operator\">=</span><span class=\"token string\">'%'</span> where <span class=\"token assign-left variable\">user</span><span class=\"token operator\">=</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">;</span>\nflush privileges<span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>授权法</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">GRANT ALL PRIVILEGES ON *.* TO <span class=\"token string\">'root'</span>@<span class=\"token string\">'%'</span> IDENTIFIED BY <span class=\"token string\">'密码'</span> WITH GRANT OPTION<span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># 如果你想允许用户myuser从ip为192.168.1.6的主机连接到mysql服务器，并使用mypassword作为密码</span>\nGRANT ALL PRIVILEGES ON *.* TO <span class=\"token string\">'myuser'</span>@<span class=\"token string\">'192.168.1.3'</span> IDENTIFIED BY <span class=\"token string\">'mypassword'</span> WITH GRANT OPTION<span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<h4 id=\"8-其他\"><a href=\"#8-其他\" class=\"headerlink\" title=\"8. 其他\"></a>8. 其他</h4><p>添加服务自启动</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">chkconfig</span> <span class=\"token parameter variable\">--add</span> mysql<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>显示服务列表</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">chkconfig</span> <span class=\"token parameter variable\">--list</span>\n<span class=\"token comment\"># 如果看到mysql的服务，并且3,4,5都是on的话则成功，如果是off，则执行</span>\n<span class=\"token function\">chkconfig</span> <span class=\"token parameter variable\">--level</span> <span class=\"token number\">345</span> mysql on<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<blockquote>\n<p>假如服务未成功启动<a href=\"http://blog.csdn.net/duyuanhai/article/details/78604894\">log-error set to ‘&#x2F;var&#x2F;log&#x2F;mariadb&#x2F;mariadb.log’, however file don’t exists</a><strong>报错的情况下执行以下操作</strong>:需要创建报错中缺失的文件夹<code>mkdir z/var/log/mariadb，touch /var/log/mariadb/mariadb.log</code></p>\n</blockquote>\n<p>创建软连接</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">ln</span> <span class=\"token parameter variable\">-s</span> /usr/local/mysql/bin/mysql /usr/local/bin/mysql<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>mysql -uroot -proot无法连接的话</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">ln</span> <span class=\"token parameter variable\">-s</span> /var/lib/mysql/mysql.sock /tmp/mysql.sock<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>默认配置文件路径如下</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">配置文件：&#x2F;etc&#x2F;my.cnf\n日志文件：&#x2F;var&#x2F;log&#x2F;var&#x2F;log&#x2F;mysqld.log\n服务启动脚本：&#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;mysqld.service\nsocket文件：&#x2F;var&#x2F;run&#x2F;mysqld&#x2F;mysqld.pid<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"yum安装\"><a href=\"#yum安装\" class=\"headerlink\" title=\"yum安装\"></a>yum安装</h3><h4 id=\"一、安装本地YUM源、MySQL在MySQL官网中下载YUM源rpm安装包\"><a href=\"#一、安装本地YUM源、MySQL在MySQL官网中下载YUM源rpm安装包\" class=\"headerlink\" title=\"一、安装本地YUM源、MySQL在MySQL官网中下载YUM源rpm安装包\"></a>一、安装本地YUM源、MySQL在MySQL官网中下载YUM源rpm安装包</h4><ol>\n<li>把上面的rpm文件下载下来放到服务器上,或者在linux系统中通过wget命令下载</li>\n</ol>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">wget</span> http://dev.mysql.com/get/mysql80-community-release-el7-1.noarch.rpm<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<ol start=\"2\">\n<li>下载完成后使用yum命令本地安装yum源<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">yum localinstall mysql80-community-release-el7-1.noarch.rpm<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></li>\n<li>执行完毕后使用下面的命令检查是否安装成功<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">yum repolist enabled <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token string\">\"mysql.*-community.*\"</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></li>\n<li>安装服务器<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">yum <span class=\"token function\">install</span> <span class=\"token parameter variable\">-y</span> mysql-community-server<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></li>\n</ol>\n<h4 id=\"二、配置MySQL\"><a href=\"#二、配置MySQL\" class=\"headerlink\" title=\"二、配置MySQL\"></a>二、配置MySQL</h4><p>服务命令</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># 启动MySQL服务</span>\nsystemctl start mysqld\n<span class=\"token comment\"># 查看服务启动状态</span>\nsystemctl status mysqld\n<span class=\"token comment\"># 开机启动</span>\nsystemctl <span class=\"token builtin class-name\">enable</span> mysqld\n<span class=\"token comment\"># 重新加载开机启动配置</span>\nsystemctl daemon-reload\n\n<span class=\"token comment\"># 修改root默认密码</span>\n<span class=\"token comment\"># 查询默认密码</span>\n<span class=\"token function\">cat</span> /var/log/mysqld.log <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token string\">'temporary password'</span>\n<span class=\"token comment\"># 登录mysql,用刚才从文件中找到的密码</span>\nmysql <span class=\"token parameter variable\">-uroot</span> <span class=\"token parameter variable\">-p</span>\n<span class=\"token comment\"># 尝试修改密码,使用下面的命令修改root用户的密码</span>\nALTER <span class=\"token environment constant\">USER</span> <span class=\"token string\">'root'</span>@<span class=\"token string\">'localhost'</span> IDENTIFIED WITH mysql_native_password BY <span class=\"token string\">'你的密码'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># 添加远程登陆</span>\n<span class=\"token comment\"># 创建一个能全局访问的用户root</span>\n<span class=\"token comment\"># CREATE USER 'root'@'%' IDENTIFIED BY 你的密码'';</span>\n<span class=\"token comment\"># 给用户授权任何远程主机都可以访问数据库 </span>\nGRANT ALL PRIVILEGES ON *.* TO <span class=\"token string\">'root'</span>@<span class=\"token string\">'%'</span>WITH GRANT OPTION<span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># 输入刷新命令使修改生效</span>\nFLUSH PRIVILEGES<span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># 修改密码的加密方式</span>\n<span class=\"token comment\"># 找到mysql的配置文件vim /etc/my.cnf，把密码的加密方式改成之前版本的,8.0版本更换了密码的加密方式,我们就先用旧的</span>\n<span class=\"token comment\"># 找到default-authentication-plugin，将其注释取消</span>\ndefault-authentication-plugin<span class=\"token operator\">=</span>mysql_native_password\n<span class=\"token comment\"># 修改完my.cnf后重启服务，使其生效</span>\nsystemctl restart mysqld\n\n<span class=\"token comment\"># sql_mode=only_full_group_by问题</span>\n<span class=\"token comment\"># 查看sql_mode</span>\n<span class=\"token keyword\">select</span> @@global.sql_mode<span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># 查询出来的值为：</span>\nONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION\n\n<span class=\"token comment\"># 修改my.cnf，在[mysqld]栏下新增sql_mode，将ONLY_FULL_GROUP_BY去掉</span>\n<span class=\"token function\">vim</span> /etc/my.cnf\n<span class=\"token assign-left variable\">sql_mode</span><span class=\"token operator\">=</span><span class=\"token string\">'STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION'</span>\n<span class=\"token comment\"># 重启服务</span>\nsystemctl restart mysqld<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"rpm安装\"><a href=\"#rpm安装\" class=\"headerlink\" title=\"rpm安装\"></a>rpm安装</h3><ol>\n<li>需要通过rpm相关指令，来查询当前系统中是否存在已安装的mysql软件包<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># 查询当前系统中安装的所有软件</span>\n<span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-qa</span>\n<span class=\"token comment\"># 查询当前系统中安装的名称带mysql的软件</span>\n<span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-qa</span> <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> mysql\n<span class=\"token comment\"># 查询当前系统中安装的名称带mariadb的软件</span>\n<span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-qa</span> <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> mariadb<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li>卸载<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-ev</span> <span class=\"token parameter variable\">--nodeps</span> 软件名称\n<span class=\"token comment\"># 卸载之前请先关闭mysql服务，命令如下</span>\nsystemctl stop mysqld\n<span class=\"token comment\"># 依次卸载相关服务</span>\n<span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-e</span> <span class=\"token parameter variable\">--nodeps</span> mysql-community-server\n<span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-e</span> <span class=\"token parameter variable\">--nodeps</span> mysql-community-client\n<span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-e</span> <span class=\"token parameter variable\">--nodeps</span> mysql-community-libs\n<span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-e</span> <span class=\"token parameter variable\">--nodeps</span> mysql-community-common\n<span class=\"token comment\">#卸载mariadb</span>\n<span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-e</span> <span class=\"token parameter variable\">--nodeps</span> mariadb-libs-5.5.64-1.el7.x86_64\n<span class=\"token comment\"># 删除数据库配置文件</span>\n<span class=\"token function\">rm</span> <span class=\"token parameter variable\">-rf</span> /etc/my.cnf\n<span class=\"token comment\"># 删除数据库数据文件</span>\n<span class=\"token function\">rm</span> <span class=\"token parameter variable\">-rf</span> /var/lib/mysql\n<span class=\"token comment\"># 删除日志临时文件</span>\n<span class=\"token function\">rm</span> <span class=\"token parameter variable\">-rf</span> /var/log/mysqld.log<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li>下载rpm<br><img src=\"https://img-blog.csdnimg.cn/img_convert/7ec61ebdc9103cd70f3dd52efbd4ea19.png\" alt=\"下载\"><br>或者使用wget<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># 下载server包</span>\n<span class=\"token function\">wget</span> https://cdn.mysql.com//Downloads/MySQL-5.7/mysql-community-server-5.7.38-1.el7.x86_64.rpm\n<span class=\"token comment\"># 下载client包</span>\n<span class=\"token function\">wget</span> https://cdn.mysql.com//Downloads/MySQL-5.7/mysql-community-client-5.7.38-1.el7.x86_64.rpm\n<span class=\"token comment\"># 下载common包</span>\n<span class=\"token function\">wget</span> https://cdn.mysql.com//Downloads/MySQL-5.7/mysql-community-common-5.7.38-1.el7.x86_64.rpm\n<span class=\"token comment\"># 下载libs包</span>\n<span class=\"token function\">wget</span> https://cdn.mysql.com//Downloads/MySQL-5.7/mysql-community-libs-5.7.38-1.el7.x86_64.rpm<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li>安装<blockquote>\n<p>包之间相互依赖，所以必须注意安装顺序</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># 相关依赖</span>\nyum <span class=\"token function\">install</span> libaio <span class=\"token parameter variable\">-y</span>\nyum <span class=\"token function\">install</span> net-tools <span class=\"token parameter variable\">-y</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre></blockquote>\n</li>\n</ol>\n<p>先装common,再装libs（确保mariadb已卸载，centos7默认支持mariadb，不支持mysql，不卸载会出现冲突）,再装client,最后装server</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># i表示install安装；v表示verbose进度条；h表示hash哈希校验。</span>\n<span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-ivh</span> mysql-community-common-8.0.11-1.el7.x86_64.rpm\n<span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-ivh</span> mysql-community-libs-8.0.11-1.el7.x86_64.rpm\n<span class=\"token comment\"># rpm -ivh mysql-community-devel-5.7.25-1.el7.x86_64.rpm</span>\n<span class=\"token comment\"># rpm -ivh mysql-community-libs-compat-5.7.25-1.el7.x86_64.rpm</span>\n<span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-ivh</span> mysql-community-client-8.0.11-1.el7.x86_64.rpm\n<span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-ivh</span> mysql-community-server-8.0.11-1.el7.x86_64.rpm<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<ol start=\"5\">\n<li>查看密码</li>\n</ol>\n<p>对于rpm安装的mysql，在mysql第一次启动时，会自动帮我们生成root用户的访问密码，并且输出在mysql的日志文件&#x2F;var&#x2F;log&#x2F;mysqld.log中，我们可以查看这份日志文件，从而获取到访问密码</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">grep</span> <span class=\"token string\">'temporary password'</span> /var/log/mysqld.log\n<span class=\"token comment\"># 或者</span>\n<span class=\"token function\">cat</span> /var/log/mysqld.log <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> password<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<ol start=\"6\">\n<li>配置其他内容如编码则新建<code>/etc/my.cnf</code></li>\n</ol>\n<h2 id=\"windows安装MySQL\"><a href=\"#windows安装MySQL\" class=\"headerlink\" title=\"windows安装MySQL\"></a>windows安装MySQL</h2><h3 id=\"卸载\"><a href=\"#卸载\" class=\"headerlink\" title=\"卸载\"></a>卸载</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">关闭mysql服务:net stop mysql\n删除mysql服务:mysqld -remove\n删除mysql相关文件夹，如想保留数据可保留data文件<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h3><ol>\n<li>解压mysql压缩包后进入mysql目录，新建my.ini文件并编辑</li>\n</ol>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>mysqld<span class=\"token punctuation\">]</span>\n<span class=\"token comment\"># 设置3306端口</span>\nport <span class=\"token operator\">=</span> <span class=\"token number\">3306</span>\n<span class=\"token comment\"># 设置mysql的安装目录</span>\n<span class=\"token assign-left variable\">basedir</span><span class=\"token operator\">=</span>D:<span class=\"token punctuation\">\\</span>mysql<span class=\"token punctuation\">\\</span>mysql-5.8.11-winx64\n<span class=\"token comment\"># 设置mysql数据库的数据的存放目录</span>\n<span class=\"token assign-left variable\">datadir</span><span class=\"token operator\">=</span>D:<span class=\"token punctuation\">\\</span>mysql<span class=\"token punctuation\">\\</span>mysql-5.8.11-winx64<span class=\"token punctuation\">\\</span>data\n<span class=\"token comment\"># 允许最大连接数</span>\n<span class=\"token assign-left variable\">max_connections</span><span class=\"token operator\">=</span><span class=\"token number\">200</span>\n<span class=\"token comment\"># 创建新表时将使用的默认存储引擎</span>\ndefault-storage-engine<span class=\"token operator\">=</span>INNODB<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<ol start=\"2\">\n<li><p>将mysql加入环境变量</p>\n</li>\n<li><p>管理员打开cmd切换到mysql bin目录下(一定要切换),执行<strong>mysqld install</strong>安装mysql服务，成功打印<strong>service successfully installed</strong>后执行<strong>mysqld –initialize –console</strong>会对数据库做初始化并打印相应日志：可以找到root@localhost之后的一串字符就是初始密码，然后执行net start mysql开启服务</p>\n</li>\n<li><p>修改密码（5.7版本以前）</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># mysql -uroot -p输入密码后</span>\n<span class=\"token builtin class-name\">set</span> password <span class=\"token keyword\">for</span> root@localhost <span class=\"token operator\">=</span> password<span class=\"token punctuation\">(</span><span class=\"token string\">'123456'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># 8.0修改密码</span>\n<span class=\"token builtin class-name\">set</span> password <span class=\"token operator\">=</span> <span class=\"token string\">'123456'</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre></li>\n</ol>\n<h3 id=\"8-0连接navicat\"><a href=\"#8-0连接navicat\" class=\"headerlink\" title=\"8.0连接navicat\"></a>8.0连接navicat</h3><p>navicat连接8.0需要把mysql用户登录密码加密规则还原成mysql_native_password</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">ALTER <span class=\"token environment constant\">USER</span> <span class=\"token string\">'root'</span>@<span class=\"token string\">'localhost'</span> IDENTIFIED BY <span class=\"token string\">'root'</span> PASSWORD EXPIRE NEVER<span class=\"token punctuation\">;</span> <span class=\"token comment\">#修改加密规则</span>\nALTER <span class=\"token environment constant\">USER</span> <span class=\"token string\">'root'</span>@<span class=\"token string\">'localhost'</span> IDENTIFIED WITH mysql_native_password BY <span class=\"token string\">'root'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">#更新一下用户的密码</span>\nFLUSH PRIVILEGES<span class=\"token punctuation\">;</span> <span class=\"token comment\">#刷新权限</span>\n<span class=\"token comment\"># 然后use mysql;</span>\nupdate user <span class=\"token builtin class-name\">set</span> <span class=\"token function\">host</span> <span class=\"token operator\">=</span> <span class=\"token string\">'%'</span> where user <span class=\"token operator\">=</span> <span class=\"token string\">'root'</span><span class=\"token punctuation\">;</span>\nFLUSH PRIVILEGES<span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"相关文章\"><a href=\"#相关文章\" class=\"headerlink\" title=\"相关文章\"></a>相关文章</h2><ul>\n<li><a href=\"https://mp.weixin.qq.com/s?__biz=MzkzODE3OTI0Ng==&mid=2247491190&idx=1&sn=6e6ed61a51e2f214d19e304038bde8b4&source=41#wechat_redirect\">一文教你在CentOS7下安装MySQL及搭建主从复制</a></li>\n<li><a href=\"https://mp.weixin.qq.com/s/R89aCCFvCvudLp6FUn2JjQ\">手把手教大家搭建MySQL主从复制</a></li>\n</ul>\n","categories":[{"name":"数据库","path":"api/categories/数据库.json"}],"tags":[{"name":"安装","path":"api/tags/安装.json"}]}