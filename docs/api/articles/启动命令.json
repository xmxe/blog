{"title":"启动命令","slug":"启动命令","date":"2022-09-27T06:26:58.323Z","updated":"2023-03-22T07:08:28.909Z","comments":true,"path":"api/articles/启动命令.json","excerpt":null,"covers":"https://pic1.zhimg.com/v2-c35c3cd265fdcbb1fa7adbea81378c7a.jpg","content":"<h3 id=\"redis\"><a href=\"#redis\" class=\"headerlink\" title=\"redis\"></a>redis</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">./redis-server /usr/local/redis/redis.conf\n./redis-cli <span class=\"token parameter variable\">-h</span> <span class=\"token number\">127.0</span>.0.1 <span class=\"token parameter variable\">-p</span> <span class=\"token number\">6379</span> <span class=\"token parameter variable\">-a</span> <span class=\"token number\">123456</span>\n./redis-cli <span class=\"token parameter variable\">-h</span> <span class=\"token number\">127.0</span>.0.1 <span class=\"token parameter variable\">-p</span> <span class=\"token number\">6379</span> <span class=\"token parameter variable\">-a</span> <span class=\"token number\">123456</span> <span class=\"token function\">shutdown</span> <span class=\"token comment\"># 关闭redis</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"nginx\"><a href=\"#nginx\" class=\"headerlink\" title=\"nginx\"></a>nginx</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">/usr/local/nginx/sbin/nginx <span class=\"token parameter variable\">-s</span> reload\n/usr/local/nginx/sbin/nginx <span class=\"token parameter variable\">-s</span> quit <span class=\"token comment\"># (正常退出，保存相关信息)</span>\n/usr/local/nginx/sbin/nginx <span class=\"token parameter variable\">-s</span> stop <span class=\"token comment\"># (立即退出，不保存相关信息)</span>\n\n<span class=\"token comment\"># windows</span>\nstart nginx<span class=\"token punctuation\">(</span>.exe<span class=\"token punctuation\">)</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"zookeeper\"><a href=\"#zookeeper\" class=\"headerlink\" title=\"zookeeper\"></a>zookeeper</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">./zkServer.sh start\n./zkCli.sh <span class=\"token parameter variable\">-server</span> <span class=\"token number\">127.0</span>.0.1:2181<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<h3 id=\"kafka\"><a href=\"#kafka\" class=\"headerlink\" title=\"kafka\"></a>kafka</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">./kafka-server-start.sh <span class=\"token punctuation\">..</span>/config/server.properties <span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>></span>/dev/null <span class=\"token operator\"><span class=\"token file-descriptor important\">2</span>></span><span class=\"token file-descriptor important\">&amp;1</span> <span class=\"token operator\">&amp;</span>\n./kafka-server-stop.sh\n./zookeeper-server-start.sh <span class=\"token punctuation\">..</span>/conf/zookeeper.properties\n./zookeeper-server-stop.sh<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"nexus\"><a href=\"#nexus\" class=\"headerlink\" title=\"nexus\"></a>nexus</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">./bin/nexus start\n<span class=\"token comment\"># 访问地址:http://192.168.236.131:8081/nexus 默认账号:admin/admin123</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<h3 id=\"cas-server\"><a href=\"#cas-server\" class=\"headerlink\" title=\"cas_server\"></a>cas_server</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> /usr/local/cas/cas-overlay-template\n./build.sh run\n<span class=\"token comment\"># 清除target文件夹</span>\n./build.sh clean\n<span class=\"token comment\"># 其他命令可以查看build.sh里面的脚本内容,控制台出现READY后访问ip:port/cas/login 即可登陆,默认账号：casuser:Mellon</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"nacos\"><a href=\"#nacos\" class=\"headerlink\" title=\"nacos\"></a>nacos</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># 单机模式启动</span>\n./startup.sh <span class=\"token parameter variable\">-m</span> standalone\n<span class=\"token comment\"># 集群启动使用外置数据源,需要配置cluster.conf且节点数量要>=3</span>\n./startup.sh\n<span class=\"token comment\"># 集群启动使用内置数据源</span>\n<span class=\"token function\">sh</span> startup.sh <span class=\"token parameter variable\">-p</span> embedded\n<span class=\"token comment\"># 默认账号：nacos:nacos</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"arthas\"><a href=\"#arthas\" class=\"headerlink\" title=\"arthas\"></a>arthas</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">java</span> <span class=\"token parameter variable\">-jar</span> arthas-boot.jar <span class=\"token punctuation\">[</span>java pid<span class=\"token punctuation\">]</span>\n<span class=\"token comment\"># web console：127.0.0.1:8563 127.0.0.1:3658</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<h3 id=\"consul\"><a href=\"#consul\" class=\"headerlink\" title=\"consul\"></a>consul</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># -dev表示开发模式运行，只有本地可以访问，另外还有-server表示服务模式运行</span>\nconsul agent <span class=\"token parameter variable\">-dev</span>\n<span class=\"token comment\"># 可以使用ip访问</span>\n./consul agent <span class=\"token parameter variable\">-dev</span> <span class=\"token parameter variable\">-client</span> <span class=\"token number\">0.0</span>.0.0 <span class=\"token parameter variable\">-ui</span>\n<span class=\"token comment\"># 访问localhost:8500</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"weblogic\"><a href=\"#weblogic\" class=\"headerlink\" title=\"weblogic\"></a>weblogic</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># 执行./startWebLogic.sh</span>\n<span class=\"token comment\"># 访问http://ip:7001/console</span>\n/home/test/Oracle/Middleware/Oracle_Home/user_projects/domains/base_domain/bin<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"shell脚本\"><a href=\"#shell脚本\" class=\"headerlink\" title=\"shell脚本\"></a>shell脚本</h3><p><a href=\"https://mp.weixin.qq.com/s/KhCmbC5UPuRgmqGX-uOJCw\">9个实用shell脚本，建议收藏</a><br><a href=\"https://javaguide.cn/cs-basics/operating-system/shell-intro.html\">Shell编程基础知识总结</a></p>\n<blockquote>\n<p>$#是传给脚本的参数个数<br>$0是脚本本身的名字<br>$1是传递给该shell脚本的第一个参数<br>$2是传递给该shell脚本的第二个参数<br>$@是传给脚本的所有参数的列表<br>$*是以一个单字符串显示所有向脚本传递的参数，与位置变量不同，参数可超过9个<br>$$是脚本运行的当前进程ID号<br>$?是显示最后命令的退出状态，0表示没有错误，其他表示有错误</p>\n</blockquote>\n<h4 id=\"启动jar\"><a href=\"#启动jar\" class=\"headerlink\" title=\"启动jar\"></a>启动jar</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin.sh</span>\n<span class=\"token comment\"># 注意不要有空格</span>\n<span class=\"token assign-left variable\">gatewayjar</span><span class=\"token operator\">=</span>gateway.jar\n<span class=\"token assign-left variable\">gatewaypid</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">ps</span> <span class=\"token parameter variable\">-ef</span> <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token function\">java</span> <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> $gatewayjar <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token parameter variable\">-v</span> <span class=\"token string\">'grep'</span><span class=\"token operator\">|</span> <span class=\"token function\">awk</span> <span class=\"token string\">'&#123;print $2&#125;'</span><span class=\"token variable\">)</span></span>\n<span class=\"token comment\"># 两个命令在一行的话使用分号断开</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token variable\">$gatewaypid</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n\t<span class=\"token function\">kill</span> <span class=\"token parameter variable\">-9</span> <span class=\"token variable\">$gatewaypid</span>\n\t<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"进程<span class=\"token variable\">$gatewaypid</span> killed\"</span>\n<span class=\"token keyword\">fi</span>\n<span class=\"token function\">nohup</span> <span class=\"token function\">java</span> <span class=\"token parameter variable\">-jar</span> gateway.jar <span class=\"token operator\">></span>/dev/null <span class=\"token operator\"><span class=\"token file-descriptor important\">2</span>></span><span class=\"token file-descriptor important\">&amp;1</span> <span class=\"token operator\">&amp;</span>\n<span class=\"token comment\"># 判断上一个命令是否执行成功 $?返回上一个命令执行状态 0成功1失败 -ne表示不等于</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token variable\">$?</span> <span class=\"token parameter variable\">-ne</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n\t<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"start failed\"</span>\n<span class=\"token keyword\">else</span>\n\t<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"start success\"</span>\n<span class=\"token keyword\">fi</span>\n\n<span class=\"token comment\"># ...</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h4 id=\"kill所有java进程\"><a href=\"#kill所有java进程\" class=\"headerlink\" title=\"kill所有java进程\"></a>kill所有java进程</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin.sh</span>\n<span class=\"token comment\"># 查找进程们（注意可能返回多个）</span>\n<span class=\"token assign-left variable\">pIdArr</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">ps</span> <span class=\"token parameter variable\">-ef</span> <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token function\">java</span> <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token parameter variable\">-v</span> <span class=\"token string\">\"grep\"</span> <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> <span class=\"token string\">'&#123;print $2&#125;'</span><span class=\"token variable\">)</span></span>\n<span class=\"token comment\"># 遍历kill进程们</span>\n<span class=\"token keyword\">for</span> <span class=\"token for-or-select variable\">pId</span> <span class=\"token keyword\">in</span> <span class=\"token variable\">$&#123;pIdArr&#125;</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">do</span>\n  <span class=\"token function\">kill</span> <span class=\"token parameter variable\">-9</span> <span class=\"token variable\">$&#123;pId&#125;</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"进程：<span class=\"token variable\">$&#123;pId&#125;</span> 被kill\"</span>\n<span class=\"token keyword\">done</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"ruoyi脚本\"><a href=\"#ruoyi脚本\" class=\"headerlink\" title=\"ruoyi脚本\"></a>ruoyi脚本</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/sh</span>\n<span class=\"token comment\"># ./ry.sh start:启动 stop:停止 restart:重启 status:状态</span>\n<span class=\"token assign-left variable\">AppName</span><span class=\"token operator\">=</span>ruoyi-admin.jar\n\n<span class=\"token comment\"># JVM参数</span>\n<span class=\"token assign-left variable\">JVM_OPTS</span><span class=\"token operator\">=</span><span class=\"token string\">\"-Dname=<span class=\"token variable\">$AppName</span>  -Duser.timezone=Asia/Shanghai -Xms512m -Xmx1024m -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=512m -XX:+HeapDumpOnOutOfMemoryError -XX:+PrintGCDateStamps  -XX:+PrintGCDetails -XX:NewRatio=1 -XX:SurvivorRatio=30 -XX:+UseParallelGC -XX:+UseParallelOldGC\"</span>\n<span class=\"token assign-left variable\">APP_HOME</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token builtin class-name\">pwd</span><span class=\"token variable\">`</span></span>\n<span class=\"token assign-left variable\">LOG_PATH</span><span class=\"token operator\">=</span><span class=\"token variable\">$APP_HOME</span>/logs/<span class=\"token variable\">$AppName</span>.log\n<span class=\"token comment\"># start stop restart status</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"<span class=\"token variable\">$1</span>\"</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">then</span>\n\t<span class=\"token comment\"># echo -e 将转义后的内容输出到屏幕上</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token parameter variable\">-e</span> <span class=\"token string\">\"<span class=\"token entity\" title=\"\\033\">\\033</span>[0;31m 未输入操作名 <span class=\"token entity\" title=\"\\033\">\\033</span>[0m  <span class=\"token entity\" title=\"\\033\">\\033</span>[0;34m &#123;start|stop|restart|status&#125; <span class=\"token entity\" title=\"\\033\">\\033</span>[0m\"</span>\n    <span class=\"token builtin class-name\">exit</span> <span class=\"token number\">1</span>\n<span class=\"token keyword\">fi</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"<span class=\"token variable\">$AppName</span>\"</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">then</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token parameter variable\">-e</span> <span class=\"token string\">\"<span class=\"token entity\" title=\"\\033\">\\033</span>[0;31m 未输入应用名 <span class=\"token entity\" title=\"\\033\">\\033</span>[0m\"</span>\n    <span class=\"token builtin class-name\">exit</span> <span class=\"token number\">1</span>\n<span class=\"token keyword\">fi</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function-name function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token assign-left variable\">PID</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token function\">ps</span> <span class=\"token parameter variable\">-ef</span> <span class=\"token operator\">|</span><span class=\"token function\">grep</span> <span class=\"token function\">java</span><span class=\"token operator\">|</span><span class=\"token function\">grep</span> $AppName<span class=\"token operator\">|</span><span class=\"token function\">grep</span> <span class=\"token parameter variable\">-v</span> <span class=\"token function\">grep</span><span class=\"token operator\">|</span><span class=\"token function\">awk</span> <span class=\"token string\">'&#123;print $2&#125;'</span><span class=\"token variable\">`</span></span>\n\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> x<span class=\"token string\">\"<span class=\"token variable\">$PID</span>\"</span> <span class=\"token operator\">!=</span> x<span class=\"token string\">\"\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n\t    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">$AppName</span> is running...\"</span>\n\t<span class=\"token keyword\">else</span>\n\t\t<span class=\"token function\">nohup</span> <span class=\"token function\">java</span> <span class=\"token variable\">$JVM_OPTS</span> <span class=\"token parameter variable\">-jar</span> <span class=\"token variable\">$AppName</span> <span class=\"token operator\">></span> /dev/null <span class=\"token operator\"><span class=\"token file-descriptor important\">2</span>></span><span class=\"token file-descriptor important\">&amp;1</span> <span class=\"token operator\">&amp;</span>\n\t\t<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Start <span class=\"token variable\">$AppName</span> success...\"</span>\n\t<span class=\"token keyword\">fi</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function-name function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Stop <span class=\"token variable\">$AppName</span>\"</span>\n\n\t<span class=\"token assign-left variable\">PID</span><span class=\"token operator\">=</span><span class=\"token string\">\"\"</span>\n\t<span class=\"token function-name function\">query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token assign-left variable\">PID</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token function\">ps</span> <span class=\"token parameter variable\">-ef</span> <span class=\"token operator\">|</span><span class=\"token function\">grep</span> <span class=\"token function\">java</span><span class=\"token operator\">|</span><span class=\"token function\">grep</span> $AppName<span class=\"token operator\">|</span><span class=\"token function\">grep</span> <span class=\"token parameter variable\">-v</span> <span class=\"token function\">grep</span><span class=\"token operator\">|</span><span class=\"token function\">awk</span> <span class=\"token string\">'&#123;print $2&#125;'</span><span class=\"token variable\">`</span></span>\n\t<span class=\"token punctuation\">&#125;</span>\n\n\tquery\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> x<span class=\"token string\">\"<span class=\"token variable\">$PID</span>\"</span> <span class=\"token operator\">!=</span> x<span class=\"token string\">\"\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n\t\t<span class=\"token function\">kill</span> <span class=\"token parameter variable\">-TERM</span> <span class=\"token variable\">$PID</span>\n\t\t<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">$AppName</span> (pid:<span class=\"token variable\">$PID</span>) exiting...\"</span>\n\t\t<span class=\"token keyword\">while</span> <span class=\"token punctuation\">[</span> x<span class=\"token string\">\"<span class=\"token variable\">$PID</span>\"</span> <span class=\"token operator\">!=</span> x<span class=\"token string\">\"\"</span> <span class=\"token punctuation\">]</span>\n\t\t<span class=\"token keyword\">do</span>\n\t\t\t<span class=\"token function\">sleep</span> <span class=\"token number\">1</span>\n\t\t\tquery\n\t\t<span class=\"token keyword\">done</span>\n\t\t<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">$AppName</span> exited.\"</span>\n\t<span class=\"token keyword\">else</span>\n\t\t<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">$AppName</span> already stopped.\"</span>\n\t<span class=\"token keyword\">fi</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function-name function\">restart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    stop\n    <span class=\"token function\">sleep</span> <span class=\"token number\">2</span>\n    start\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function-name function\">status</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token assign-left variable\">PID</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token function\">ps</span> <span class=\"token parameter variable\">-ef</span> <span class=\"token operator\">|</span><span class=\"token function\">grep</span> <span class=\"token function\">java</span><span class=\"token operator\">|</span><span class=\"token function\">grep</span> $AppName<span class=\"token operator\">|</span><span class=\"token function\">grep</span> <span class=\"token parameter variable\">-v</span> <span class=\"token function\">grep</span><span class=\"token operator\">|</span><span class=\"token function\">wc</span> <span class=\"token parameter variable\">-l</span><span class=\"token variable\">`</span></span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token variable\">$PID</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">then</span>\n        <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">$AppName</span> is running...\"</span>\n    <span class=\"token keyword\">else</span>\n        <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">$AppName</span> is not running...\"</span>\n    <span class=\"token keyword\">fi</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">case</span> <span class=\"token variable\">$1</span> <span class=\"token keyword\">in</span>\n    start<span class=\"token punctuation\">)</span>\n    start<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span>\n    stop<span class=\"token punctuation\">)</span>\n    stop<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span>\n    restart<span class=\"token punctuation\">)</span>\n    restart<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span>\n    status<span class=\"token punctuation\">)</span>\n    status<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span>\n    *<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">esac</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n","more":"<h3 id=\"redis\"><a href=\"#redis\" class=\"headerlink\" title=\"redis\"></a>redis</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">./redis-server /usr/local/redis/redis.conf\n./redis-cli <span class=\"token parameter variable\">-h</span> <span class=\"token number\">127.0</span>.0.1 <span class=\"token parameter variable\">-p</span> <span class=\"token number\">6379</span> <span class=\"token parameter variable\">-a</span> <span class=\"token number\">123456</span>\n./redis-cli <span class=\"token parameter variable\">-h</span> <span class=\"token number\">127.0</span>.0.1 <span class=\"token parameter variable\">-p</span> <span class=\"token number\">6379</span> <span class=\"token parameter variable\">-a</span> <span class=\"token number\">123456</span> <span class=\"token function\">shutdown</span> <span class=\"token comment\"># 关闭redis</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"nginx\"><a href=\"#nginx\" class=\"headerlink\" title=\"nginx\"></a>nginx</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">/usr/local/nginx/sbin/nginx <span class=\"token parameter variable\">-s</span> reload\n/usr/local/nginx/sbin/nginx <span class=\"token parameter variable\">-s</span> quit <span class=\"token comment\"># (正常退出，保存相关信息)</span>\n/usr/local/nginx/sbin/nginx <span class=\"token parameter variable\">-s</span> stop <span class=\"token comment\"># (立即退出，不保存相关信息)</span>\n\n<span class=\"token comment\"># windows</span>\nstart nginx<span class=\"token punctuation\">(</span>.exe<span class=\"token punctuation\">)</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"zookeeper\"><a href=\"#zookeeper\" class=\"headerlink\" title=\"zookeeper\"></a>zookeeper</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">./zkServer.sh start\n./zkCli.sh <span class=\"token parameter variable\">-server</span> <span class=\"token number\">127.0</span>.0.1:2181<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<h3 id=\"kafka\"><a href=\"#kafka\" class=\"headerlink\" title=\"kafka\"></a>kafka</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">./kafka-server-start.sh <span class=\"token punctuation\">..</span>/config/server.properties <span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>></span>/dev/null <span class=\"token operator\"><span class=\"token file-descriptor important\">2</span>></span><span class=\"token file-descriptor important\">&amp;1</span> <span class=\"token operator\">&amp;</span>\n./kafka-server-stop.sh\n./zookeeper-server-start.sh <span class=\"token punctuation\">..</span>/conf/zookeeper.properties\n./zookeeper-server-stop.sh<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"nexus\"><a href=\"#nexus\" class=\"headerlink\" title=\"nexus\"></a>nexus</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">./bin/nexus start\n<span class=\"token comment\"># 访问地址:http://192.168.236.131:8081/nexus 默认账号:admin/admin123</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<h3 id=\"cas-server\"><a href=\"#cas-server\" class=\"headerlink\" title=\"cas_server\"></a>cas_server</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> /usr/local/cas/cas-overlay-template\n./build.sh run\n<span class=\"token comment\"># 清除target文件夹</span>\n./build.sh clean\n<span class=\"token comment\"># 其他命令可以查看build.sh里面的脚本内容,控制台出现READY后访问ip:port/cas/login 即可登陆,默认账号：casuser:Mellon</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"nacos\"><a href=\"#nacos\" class=\"headerlink\" title=\"nacos\"></a>nacos</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># 单机模式启动</span>\n./startup.sh <span class=\"token parameter variable\">-m</span> standalone\n<span class=\"token comment\"># 集群启动使用外置数据源,需要配置cluster.conf且节点数量要>=3</span>\n./startup.sh\n<span class=\"token comment\"># 集群启动使用内置数据源</span>\n<span class=\"token function\">sh</span> startup.sh <span class=\"token parameter variable\">-p</span> embedded\n<span class=\"token comment\"># 默认账号：nacos:nacos</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"arthas\"><a href=\"#arthas\" class=\"headerlink\" title=\"arthas\"></a>arthas</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">java</span> <span class=\"token parameter variable\">-jar</span> arthas-boot.jar <span class=\"token punctuation\">[</span>java pid<span class=\"token punctuation\">]</span>\n<span class=\"token comment\"># web console：127.0.0.1:8563 127.0.0.1:3658</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<h3 id=\"consul\"><a href=\"#consul\" class=\"headerlink\" title=\"consul\"></a>consul</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># -dev表示开发模式运行，只有本地可以访问，另外还有-server表示服务模式运行</span>\nconsul agent <span class=\"token parameter variable\">-dev</span>\n<span class=\"token comment\"># 可以使用ip访问</span>\n./consul agent <span class=\"token parameter variable\">-dev</span> <span class=\"token parameter variable\">-client</span> <span class=\"token number\">0.0</span>.0.0 <span class=\"token parameter variable\">-ui</span>\n<span class=\"token comment\"># 访问localhost:8500</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"weblogic\"><a href=\"#weblogic\" class=\"headerlink\" title=\"weblogic\"></a>weblogic</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># 执行./startWebLogic.sh</span>\n<span class=\"token comment\"># 访问http://ip:7001/console</span>\n/home/test/Oracle/Middleware/Oracle_Home/user_projects/domains/base_domain/bin<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"shell脚本\"><a href=\"#shell脚本\" class=\"headerlink\" title=\"shell脚本\"></a>shell脚本</h3><p><a href=\"https://mp.weixin.qq.com/s/KhCmbC5UPuRgmqGX-uOJCw\">9个实用shell脚本，建议收藏</a><br><a href=\"https://javaguide.cn/cs-basics/operating-system/shell-intro.html\">Shell编程基础知识总结</a></p>\n<blockquote>\n<p>$#是传给脚本的参数个数<br>$0是脚本本身的名字<br>$1是传递给该shell脚本的第一个参数<br>$2是传递给该shell脚本的第二个参数<br>$@是传给脚本的所有参数的列表<br>$*是以一个单字符串显示所有向脚本传递的参数，与位置变量不同，参数可超过9个<br>$$是脚本运行的当前进程ID号<br>$?是显示最后命令的退出状态，0表示没有错误，其他表示有错误</p>\n</blockquote>\n<h4 id=\"启动jar\"><a href=\"#启动jar\" class=\"headerlink\" title=\"启动jar\"></a>启动jar</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin.sh</span>\n<span class=\"token comment\"># 注意不要有空格</span>\n<span class=\"token assign-left variable\">gatewayjar</span><span class=\"token operator\">=</span>gateway.jar\n<span class=\"token assign-left variable\">gatewaypid</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">ps</span> <span class=\"token parameter variable\">-ef</span> <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token function\">java</span> <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> $gatewayjar <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token parameter variable\">-v</span> <span class=\"token string\">'grep'</span><span class=\"token operator\">|</span> <span class=\"token function\">awk</span> <span class=\"token string\">'&#123;print $2&#125;'</span><span class=\"token variable\">)</span></span>\n<span class=\"token comment\"># 两个命令在一行的话使用分号断开</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token variable\">$gatewaypid</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n\t<span class=\"token function\">kill</span> <span class=\"token parameter variable\">-9</span> <span class=\"token variable\">$gatewaypid</span>\n\t<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"进程<span class=\"token variable\">$gatewaypid</span> killed\"</span>\n<span class=\"token keyword\">fi</span>\n<span class=\"token function\">nohup</span> <span class=\"token function\">java</span> <span class=\"token parameter variable\">-jar</span> gateway.jar <span class=\"token operator\">></span>/dev/null <span class=\"token operator\"><span class=\"token file-descriptor important\">2</span>></span><span class=\"token file-descriptor important\">&amp;1</span> <span class=\"token operator\">&amp;</span>\n<span class=\"token comment\"># 判断上一个命令是否执行成功 $?返回上一个命令执行状态 0成功1失败 -ne表示不等于</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token variable\">$?</span> <span class=\"token parameter variable\">-ne</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n\t<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"start failed\"</span>\n<span class=\"token keyword\">else</span>\n\t<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"start success\"</span>\n<span class=\"token keyword\">fi</span>\n\n<span class=\"token comment\"># ...</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h4 id=\"kill所有java进程\"><a href=\"#kill所有java进程\" class=\"headerlink\" title=\"kill所有java进程\"></a>kill所有java进程</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin.sh</span>\n<span class=\"token comment\"># 查找进程们（注意可能返回多个）</span>\n<span class=\"token assign-left variable\">pIdArr</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">ps</span> <span class=\"token parameter variable\">-ef</span> <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token function\">java</span> <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token parameter variable\">-v</span> <span class=\"token string\">\"grep\"</span> <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> <span class=\"token string\">'&#123;print $2&#125;'</span><span class=\"token variable\">)</span></span>\n<span class=\"token comment\"># 遍历kill进程们</span>\n<span class=\"token keyword\">for</span> <span class=\"token for-or-select variable\">pId</span> <span class=\"token keyword\">in</span> <span class=\"token variable\">$&#123;pIdArr&#125;</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">do</span>\n  <span class=\"token function\">kill</span> <span class=\"token parameter variable\">-9</span> <span class=\"token variable\">$&#123;pId&#125;</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"进程：<span class=\"token variable\">$&#123;pId&#125;</span> 被kill\"</span>\n<span class=\"token keyword\">done</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"ruoyi脚本\"><a href=\"#ruoyi脚本\" class=\"headerlink\" title=\"ruoyi脚本\"></a>ruoyi脚本</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/sh</span>\n<span class=\"token comment\"># ./ry.sh start:启动 stop:停止 restart:重启 status:状态</span>\n<span class=\"token assign-left variable\">AppName</span><span class=\"token operator\">=</span>ruoyi-admin.jar\n\n<span class=\"token comment\"># JVM参数</span>\n<span class=\"token assign-left variable\">JVM_OPTS</span><span class=\"token operator\">=</span><span class=\"token string\">\"-Dname=<span class=\"token variable\">$AppName</span>  -Duser.timezone=Asia/Shanghai -Xms512m -Xmx1024m -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=512m -XX:+HeapDumpOnOutOfMemoryError -XX:+PrintGCDateStamps  -XX:+PrintGCDetails -XX:NewRatio=1 -XX:SurvivorRatio=30 -XX:+UseParallelGC -XX:+UseParallelOldGC\"</span>\n<span class=\"token assign-left variable\">APP_HOME</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token builtin class-name\">pwd</span><span class=\"token variable\">`</span></span>\n<span class=\"token assign-left variable\">LOG_PATH</span><span class=\"token operator\">=</span><span class=\"token variable\">$APP_HOME</span>/logs/<span class=\"token variable\">$AppName</span>.log\n<span class=\"token comment\"># start stop restart status</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"<span class=\"token variable\">$1</span>\"</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">then</span>\n\t<span class=\"token comment\"># echo -e 将转义后的内容输出到屏幕上</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token parameter variable\">-e</span> <span class=\"token string\">\"<span class=\"token entity\" title=\"\\033\">\\033</span>[0;31m 未输入操作名 <span class=\"token entity\" title=\"\\033\">\\033</span>[0m  <span class=\"token entity\" title=\"\\033\">\\033</span>[0;34m &#123;start|stop|restart|status&#125; <span class=\"token entity\" title=\"\\033\">\\033</span>[0m\"</span>\n    <span class=\"token builtin class-name\">exit</span> <span class=\"token number\">1</span>\n<span class=\"token keyword\">fi</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"<span class=\"token variable\">$AppName</span>\"</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">then</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token parameter variable\">-e</span> <span class=\"token string\">\"<span class=\"token entity\" title=\"\\033\">\\033</span>[0;31m 未输入应用名 <span class=\"token entity\" title=\"\\033\">\\033</span>[0m\"</span>\n    <span class=\"token builtin class-name\">exit</span> <span class=\"token number\">1</span>\n<span class=\"token keyword\">fi</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function-name function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token assign-left variable\">PID</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token function\">ps</span> <span class=\"token parameter variable\">-ef</span> <span class=\"token operator\">|</span><span class=\"token function\">grep</span> <span class=\"token function\">java</span><span class=\"token operator\">|</span><span class=\"token function\">grep</span> $AppName<span class=\"token operator\">|</span><span class=\"token function\">grep</span> <span class=\"token parameter variable\">-v</span> <span class=\"token function\">grep</span><span class=\"token operator\">|</span><span class=\"token function\">awk</span> <span class=\"token string\">'&#123;print $2&#125;'</span><span class=\"token variable\">`</span></span>\n\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> x<span class=\"token string\">\"<span class=\"token variable\">$PID</span>\"</span> <span class=\"token operator\">!=</span> x<span class=\"token string\">\"\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n\t    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">$AppName</span> is running...\"</span>\n\t<span class=\"token keyword\">else</span>\n\t\t<span class=\"token function\">nohup</span> <span class=\"token function\">java</span> <span class=\"token variable\">$JVM_OPTS</span> <span class=\"token parameter variable\">-jar</span> <span class=\"token variable\">$AppName</span> <span class=\"token operator\">></span> /dev/null <span class=\"token operator\"><span class=\"token file-descriptor important\">2</span>></span><span class=\"token file-descriptor important\">&amp;1</span> <span class=\"token operator\">&amp;</span>\n\t\t<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Start <span class=\"token variable\">$AppName</span> success...\"</span>\n\t<span class=\"token keyword\">fi</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function-name function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Stop <span class=\"token variable\">$AppName</span>\"</span>\n\n\t<span class=\"token assign-left variable\">PID</span><span class=\"token operator\">=</span><span class=\"token string\">\"\"</span>\n\t<span class=\"token function-name function\">query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token assign-left variable\">PID</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token function\">ps</span> <span class=\"token parameter variable\">-ef</span> <span class=\"token operator\">|</span><span class=\"token function\">grep</span> <span class=\"token function\">java</span><span class=\"token operator\">|</span><span class=\"token function\">grep</span> $AppName<span class=\"token operator\">|</span><span class=\"token function\">grep</span> <span class=\"token parameter variable\">-v</span> <span class=\"token function\">grep</span><span class=\"token operator\">|</span><span class=\"token function\">awk</span> <span class=\"token string\">'&#123;print $2&#125;'</span><span class=\"token variable\">`</span></span>\n\t<span class=\"token punctuation\">&#125;</span>\n\n\tquery\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> x<span class=\"token string\">\"<span class=\"token variable\">$PID</span>\"</span> <span class=\"token operator\">!=</span> x<span class=\"token string\">\"\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n\t\t<span class=\"token function\">kill</span> <span class=\"token parameter variable\">-TERM</span> <span class=\"token variable\">$PID</span>\n\t\t<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">$AppName</span> (pid:<span class=\"token variable\">$PID</span>) exiting...\"</span>\n\t\t<span class=\"token keyword\">while</span> <span class=\"token punctuation\">[</span> x<span class=\"token string\">\"<span class=\"token variable\">$PID</span>\"</span> <span class=\"token operator\">!=</span> x<span class=\"token string\">\"\"</span> <span class=\"token punctuation\">]</span>\n\t\t<span class=\"token keyword\">do</span>\n\t\t\t<span class=\"token function\">sleep</span> <span class=\"token number\">1</span>\n\t\t\tquery\n\t\t<span class=\"token keyword\">done</span>\n\t\t<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">$AppName</span> exited.\"</span>\n\t<span class=\"token keyword\">else</span>\n\t\t<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">$AppName</span> already stopped.\"</span>\n\t<span class=\"token keyword\">fi</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function-name function\">restart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    stop\n    <span class=\"token function\">sleep</span> <span class=\"token number\">2</span>\n    start\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function-name function\">status</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token assign-left variable\">PID</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token function\">ps</span> <span class=\"token parameter variable\">-ef</span> <span class=\"token operator\">|</span><span class=\"token function\">grep</span> <span class=\"token function\">java</span><span class=\"token operator\">|</span><span class=\"token function\">grep</span> $AppName<span class=\"token operator\">|</span><span class=\"token function\">grep</span> <span class=\"token parameter variable\">-v</span> <span class=\"token function\">grep</span><span class=\"token operator\">|</span><span class=\"token function\">wc</span> <span class=\"token parameter variable\">-l</span><span class=\"token variable\">`</span></span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token variable\">$PID</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">then</span>\n        <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">$AppName</span> is running...\"</span>\n    <span class=\"token keyword\">else</span>\n        <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">$AppName</span> is not running...\"</span>\n    <span class=\"token keyword\">fi</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">case</span> <span class=\"token variable\">$1</span> <span class=\"token keyword\">in</span>\n    start<span class=\"token punctuation\">)</span>\n    start<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span>\n    stop<span class=\"token punctuation\">)</span>\n    stop<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span>\n    restart<span class=\"token punctuation\">)</span>\n    restart<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span>\n    status<span class=\"token punctuation\">)</span>\n    status<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span>\n    *<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">esac</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n","categories":[],"tags":[{"name":"随笔","path":"api/tags/随笔.json"}]}